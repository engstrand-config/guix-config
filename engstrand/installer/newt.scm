(define-module (engstrand installer newt)
  #:use-module (gnu installer record)
  #:use-module (gnu installer utils)
  #:use-module (gnu installer dump)
  #:use-module (gnu installer newt ethernet)
  #:use-module (gnu installer newt final)
  #:use-module (gnu installer newt menu)
  #:use-module (gnu installer newt network)
  #:use-module (gnu installer newt page)
  #:use-module (gnu installer newt partition)
  #:use-module (gnu installer newt utils)
  #:use-module (gnu installer newt welcome)
  #:use-module (gnu installer newt wifi)
  #:use-module (guix config)
  #:use-module (guix discovery)
  #:use-module (guix i18n)
  #:use-module (srfi srfi-1)
  #:use-module (srfi srfi-26)
  #:use-module (srfi srfi-34)
  #:use-module (srfi srfi-35)
  #:use-module (ice-9 ftw)
  #:use-module (ice-9 match)
  #:use-module (engstrand installer record)
  #:use-module (engstrand installer newt user)
  #:use-module (engstrand installer newt system)
  #:export (newt-engstrand-installer))

(define (final-page result prev-steps)
  (run-final-page result prev-steps))

(define* (welcome-page logo #:key pci-database)
  (run-welcome-page logo #:pci-database pci-database))

(define (menu-page steps)
  (run-menu-page steps))

(define (network-page)
  (run-network-page))

(define (system-page system-configs)
  (run-system-page system-configs))

(define (user-page user-configs)
  (run-user-page user-configs))

(define (partition-page)
  (run-partitioning-page))

(define newt-engstrand-installer
  (engstrand-installer
   (name 'newt)
   (init (@@ (gnu installer newt) init))
   (exit (@@ (gnu installer newt) exit))
   (exit-error (@@ (gnu installer newt) exit-error))
   (final-page final-page)
   (menu-page menu-page)
   (network-page network-page)
   (system-page system-page)
   (user-page user-page)
   (partition-page partition-page)
   (welcome-page welcome-page)
   (run-command (@@ (gnu installer newt) newt-run-command))))
